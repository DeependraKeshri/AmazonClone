<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Library Management System</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <div class="container">
            <h1><i class="fas fa-book"></i> Digital Library</h1>
            <div class="search-container">
                <input type="text" id="search-input" placeholder="Search books...">
                <button id="search-btn"><i class="fas fa-search"></i></button>
            </div>
            <nav>
                <ul>
                    <li><a href="#" class="active" id="home-link">Home</a></li>
                    <li><a href="#" id="issued-books-link">Issued Books</a></li>
                    <li><a href="#" id="add-book-link">Add Book</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container">
        <section id="books-section">
            <h2>Library Books</h2>
            <div class="filters">
                <select id="genre-filter">
                    <option value="">All Genres</option>
                    <option value="Fiction">Fiction</option>
                    <option value="Non-Fiction">Non-Fiction</option>
                    <option value="Science Fiction">Science Fiction</option>
                    <option value="Fantasy">Fantasy</option>
                    <option value="Biography">Biography</option>
                    <option value="History">History</option>
                </select>
                <select id="availability-filter">
                    <option value="all">All</option>
                    <option value="available">Available</option>
                    <option value="checked-out">Checked Out</option>
                </select>
            </div>
            <div class="books-grid" id="books-container">
                <!-- Books will be dynamically added here -->
            </div>
        </section>

        <section id="issued-books-section" class="hidden">
            <h2>Currently Issued Books</h2>
            <div class="issued-books-list" id="issued-books-container">
                <!-- Issued books will be dynamically added here -->
            </div>
        </section>

        <section id="add-book-section" class="hidden">
            <h2>Add New Book to Library</h2>
            <form id="add-book-form">
                <div class="form-group">
                    <label for="title">Title:</label>
                    <input type="text" id="title" required>
                </div>
                <div class="form-group">
                    <label for="author">Author:</label>
                    <input type="text" id="author" required>
                </div>
                <div class="form-group">
                    <label for="genre">Genre:</label>
                    <select id="genre" required>
                        <option value="Fiction">Fiction</option>
                        <option value="Non-Fiction">Non-Fiction</option>
                        <option value="Science Fiction">Science Fiction</option>
                        <option value="Fantasy">Fantasy</option>
                        <option value="Biography">Biography</option>
                        <option value="History">History</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="year">Year Published:</label>
                    <input type="number" id="year" min="1000" max="2023" required>
                </div>
                <div class="form-group">
                    <label for="description">Description:</label>
                    <textarea id="description" rows="4" required></textarea>
                </div>
                <div class="form-group">
                    <label for="cover-url">Cover Image URL:</label>
                    <input type="url" id="cover-url">
                </div>
                <button type="submit" class="btn">Add Book</button>
            </form>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2023 Digital Library. All rights reserved.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const booksContainer = document.getElementById('books-container');
            const issuedBooksContainer = document.getElementById('issued-books-container');
            const searchInput = document.getElementById('search-input');
            const searchBtn = document.getElementById('search-btn');
            const genreFilter = document.getElementById('genre-filter');
            const availabilityFilter = document.getElementById('availability-filter');
            const addBookForm = document.getElementById('add-book-form');
            const homeLink = document.getElementById('home-link');
            const issuedBooksLink = document.getElementById('issued-books-link');
            const addBookLink = document.getElementById('add-book-link');
            const booksSection = document.getElementById('books-section');
            const issuedBooksSection = document.getElementById('issued-books-section');
            const addBookSection = document.getElementById('add-book-section');

            // Sample book data
            let books = [
                {
                    id: 1,
                    title: "The Great Gatsby",
                    author: "F. Scott Fitzgerald",
                    genre: "Fiction",
                    year: 1925,
                    description: "A story of wealth, love, and the American Dream in the 1920s.",
                    coverUrl: "https://m.media-amazon.com/images/I/71FTb9X6wsL._AC_UF1000,1000_QL80_.jpg",
                    available: true
                },
                {
                    id: 2,
                    title: "To Kill a Mockingbird",
                    author: "Harper Lee",
                    genre: "Fiction",
                    year: 1960,
                    description: "A powerful story of racial injustice and moral growth in the American South.",
                    coverUrl: "https://m.media-amazon.com/images/I/71FxgtFKcQL._AC_UF1000,1000_QL80_.jpg",
                    available: true
                },
                {
                    id: 3,
                    title: "1984",
                    author: "George Orwell",
                    genre: "Science Fiction",
                    year: 1949,
                    description: "A dystopian novel about totalitarianism and surveillance.",
                    coverUrl: "https://m.media-amazon.com/images/I/61ZewDE3beL._AC_UF1000,1000_QL80_.jpg",
                    available: false
                }
            ];

            // Display books
            function displayBooks(booksToDisplay = books) {
                booksContainer.innerHTML = '';
                
                booksToDisplay.forEach(book => {
                    const bookCard = document.createElement('div');
                    bookCard.className = 'book-card';
                    
                    bookCard.innerHTML = `
                        <div class="book-cover" style="background-image: url('${book.coverUrl || 'https://via.placeholder.com/250x350?text=No+Cover'}')"></div>
                        <div class="book-info">
                            <h3>${book.title}</h3>
                            <p>by ${book.author}</p>
                            <p>${book.genre} • ${book.year}</p>
                            <p class="availability ${book.available ? 'available' : 'unavailable'}">
                                ${book.available ? 'Available' : 'Checked Out'}
                            </p>
                            <div class="book-actions">
                                <button class="btn ${book.available ? 'btn-success' : 'btn-danger'}" onclick="toggleAvailability(${book.id})">
                                    ${book.available ? 'Check Out' : 'Return'}
                                </button>
                            </div>
                        </div>
                    `;
                    
                    booksContainer.appendChild(bookCard);
                });
            }

            // Display issued books
            function displayIssuedBooks() {
                issuedBooksContainer.innerHTML = '';
                
                const issuedBooks = books.filter(book => !book.available);
                
                if (issuedBooks.length === 0) {
                    issuedBooksContainer.innerHTML = '<p>No books are currently issued.</p>';
                    return;
                }
                
                issuedBooks.forEach(book => {
                    const listItem = document.createElement('div');
                    listItem.className = 'issued-book-item';
                    
                    listItem.innerHTML = `
                        <img src="${book.coverUrl || 'https://via.placeholder.com/60x80?text=No+Cover'}" alt="${book.title}">
                        <div class="issued-book-item-info">
                            <h3>${book.title}</h3>
                            <p>by ${book.author}</p>
                            <p>${book.genre} • ${book.year}</p>
                        </div>
                        <div class="issued-book-item-actions">
                            <button class="btn btn-success" onclick="toggleAvailability(${book.id})">
                                Return Book
                            </button>
                        </div>
                    `;
                    
                    issuedBooksContainer.appendChild(listItem);
                });
            }

            // Toggle book availability
            window.toggleAvailability = function(bookId) {
                const bookIndex = books.findIndex(book => book.id === bookId);
                if (bookIndex !== -1) {
                    books[bookIndex].available = !books[bookIndex].available;
                    displayBooks();
                    if (!issuedBooksSection.classList.contains('hidden')) {
                        displayIssuedBooks();
                    }
                }
            }

            // Filter books
            function filterBooks() {
                const searchTerm = searchInput.value.toLowerCase();
                const genre = genreFilter.value;
                const availability = availabilityFilter.value;
                
                let filteredBooks = books.filter(book => {
                    const matchesSearch = book.title.toLowerCase().includes(searchTerm) || 
                                        book.author.toLowerCase().includes(searchTerm);
                    const matchesGenre = genre === '' || book.genre === genre;
                    const matchesAvailability = availability === 'all' || 
                                            (availability === 'available' && book.available) || 
                                            (availability === 'checked-out' && !book.available);
                    
                    return matchesSearch && matchesGenre && matchesAvailability;
                });
                
                displayBooks(filteredBooks);
            }

            // Add new book
            addBookForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const newBook = {
                    id: books.length > 0 ? Math.max(...books.map(book => book.id)) + 1 : 1,
                    title: document.getElementById('title').value,
                    author: document.getElementById('author').value,
                    genre: document.getElementById('genre').value,
                    year: parseInt(document.getElementById('year').value),
                    description: document.getElementById('description').value,
                    coverUrl: document.getElementById('cover-url').value || '',
                    available: true
                };
                
                books.unshift(newBook);
                addBookForm.reset();
                showSection('books-section');
                displayBooks();
            });

            // Navigation
            function showSection(sectionId) {
                booksSection.classList.add('hidden');
                issuedBooksSection.classList.add('hidden');
                addBookSection.classList.add('hidden');
                
                homeLink.classList.remove('active');
                issuedBooksLink.classList.remove('active');
                addBookLink.classList.remove('active');
                
                if (sectionId === 'books-section') {
                    booksSection.classList.remove('hidden');
                    homeLink.classList.add('active');
                    filterBooks();
                } else if (sectionId === 'issued-books-section') {
                    issuedBooksSection.classList.remove('hidden');
                    issuedBooksLink.classList.add('active');
                    displayIssuedBooks();
                } else if (sectionId === 'add-book-section') {
                    addBookSection.classList.remove('hidden');
                    addBookLink.classList.add('active');
                }
            }

            // Event listeners
            homeLink.addEventListener('click', (e) => {
                e.preventDefault();
                showSection('books-section');
            });

            issuedBooksLink.addEventListener('click', (e) => {
                e.preventDefault();
                showSection('issued-books-section');
            });

            addBookLink.addEventListener('click', (e) => {
                e.preventDefault();
                showSection('add-book-section');
            });

            searchBtn.addEventListener('click', filterBooks);
            searchInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') {
                    filterBooks();
                }
            });

            genreFilter.addEventListener('change', filterBooks);
            availabilityFilter.addEventListener('change', filterBooks);

            // Initialize
            showSection('books-section');
        });
    </script>
</body>
</html>